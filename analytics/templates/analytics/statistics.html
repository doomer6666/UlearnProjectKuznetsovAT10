{% extends "analytics/sample.html" %}

{% block title %}Общая статистика{% endblock %}

{% block content %}
<h2>Общая статистика</h2>

<h3>Динамика уровня зарплат по годам</h3>
<table>
    <thead>
        <tr>
            <th>Год</th>
            <th>Средняя зарплата</th>
        </tr>
    </thead>
    <tbody>
        {% for item in salary_trends %}
        <tr>
            <td>{{ item.published_at__year }}</td>
            <td>{{ item.avg_salary }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>Динамика количества вакансий по годам</h3>
<table>
    <thead>
        <tr>
            <th>Год</th>
            <th>Количество вакансий</th>
        </tr>
    </thead>
    <tbody>
        {% for item in vacancy_trends %}
        <tr>
            <td>{{ item.published_at__year }}</td>
            <td>{{ item.count }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>Уровень зарплат по городам</h3>
<table>
    <thead>
        <tr>
            <th>Город</th>
            <th>Средняя зарплата</th>
        </tr>
    </thead>
    <tbody>
        {% for item in salary_by_area %}
        <tr>
            <td>{{ item.area_name }}</td>
            <td>{{ item.avg_salary }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>Доля вакансий по городам</h3>
<table>
    <thead>
        <tr>
            <th>Город</th>
            <th>Количество вакансий</th>
        </tr>
    </thead>
    <tbody>
        {% for item in vacancies_by_area %}
        <tr>
            <td>{{ item.area_name }}</td>
            <td>{{ item.count }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>ТОП-20 навыков по годам</h3>

{% for year, skills in top_skills_by_year.items %}
<h4>{{ year }} год:</h4>
<table>
    <thead>
        <tr>
            <th>Навык</th>
            <th>Количество</th>
        </tr>
    </thead>
    <tbody>
    {% for skill, count in skills %}
    <tr>
        <td>{{ skill }}</td>
        <td>{{ count }}</td>
    </tr>{% endfor %}</tbody>
</table>
{% endfor %}

{% endblock %}
